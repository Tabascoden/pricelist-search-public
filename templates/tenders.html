{% extends 'base.html' %}
{% block content %}

<div class="card" id="tenders-demo">
  <div class="cardHeader tender-flex">
    <div>
      <h1>–¢–µ–Ω–¥–µ—Ä—ã</h1>
      <div class="sub">UX-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ü–µ–Ω –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (–¥–µ–º–æ UI, localStorage).</div>
    </div>

    <form id="tender-create-form" class="tender-flex tender-form" autocomplete="off">
      <input type="text" name="title" id="tender-title" class="input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
      <button class="btn primary" type="submit" id="tender-create-btn">–°–æ–∑–¥–∞—Ç—å</button>
    </form>
  </div>

  <!-- LIST VIEW -->
  <div id="tenders-view-list">
    <div class="tender-hint">
      <span class="tag">–î–µ–º–æ</span>
      ¬´–û—Ç–∫—Ä—ã—Ç—å¬ª –≤–µ–¥—ë—Ç –Ω–∞ <code>/tenders/&lt;id&gt;</code> (–≤ –¥–µ–º–æ ‚Äî –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏). ¬´–£–¥–∞–ª–∏—Ç—å¬ª —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤ UI (localStorage).
    </div>
    <div id="tender-projects" class="tender-table-wrap">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
  </div>

  <!-- PROJECT VIEW -->
  <div id="tenders-view-project" class="hidden">
    <div class="tender-topbar">
      <button class="btn" id="tender-back">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>

      <div class="tender-title">
        <div class="h2" id="tender-project-title">–¢–µ–Ω–¥–µ—Ä</div>
        <div class="sub" id="tender-project-subtitle">
          –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤: –≤ —è—á–µ–π–∫–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ‚Äú—Ç–æ–≤–∞—Ä –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ + —Ü–µ–Ω–∞/–µ–¥‚Äù. –ü–ª–æ—Ö–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (score &lt; 0.3) —Å–∫—Ä—ã–≤–∞–µ–º.
        </div>
      </div>

      <div class="tender-actions">
        <input type="file" id="tender-upload" accept=".xlsx" style="max-width:220px;">
        <button class="btn" id="tender-upload-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å XLSX</button>
        <button class="btn" id="tender-suppliers-btn">–í—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</button>
        <button class="btn" id="tender-autopick">–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä</button>
        <button class="btn primary" id="tender-export">–≠–∫—Å–ø–æ—Ä—Ç</button>
      </div>
    </div>

    <div class="tender-hint">
      <span class="tag">UX</span>
      –ü–æ—Å–ª–µ ¬´–ï–¥.¬ª –∏–¥—É—Ç —Å—Ç–æ–ª–±—Ü—ã –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤.
      –í –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–µ: ‚úï —É–¥–∞–ª–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω–æ–µ, üîç –Ω–∞–π—Ç–∏/–≤—ã–±—Ä–∞—Ç—å –≤—Ä—É—á–Ω—É—é, ‚òÖ –≤—ã–±—Ä–∞—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É (—è—á–µ–π–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω–æ–π).
    </div>

    <div id="tender-items" class="tender-table-wrap">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
  </div>

  <!-- OFFER MODAL -->
  <div class="tender-modal hidden" id="tender-modal" aria-hidden="true">
    <div class="tender-modal-body" role="dialog" aria-modal="true">
      <div class="tender-modal-header">
        <div>
          <div class="h3">–í—ã–±–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</div>
          <div class="sub" id="tender-modal-subtitle">–ü–æ–∑–∏—Ü–∏—è: ‚Ä¶</div>
          <div class="sub" id="tender-modal-supplier">–ü–æ—Å—Ç–∞–≤—â–∏–∫: ‚Ä¶</div>
        </div>
        <button class="btn" id="tender-modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <div class="tender-modal-controls">
        <div class="tender-control">
          <div class="tender-control-title">–ü–æ–∏—Å–∫</div>
          <input class="input" id="tender-search-manual" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–º–∏–¥–æ—Ä—ã —Å–ª–∏–≤–æ–≤–∏–¥–Ω—ã–µ">
          <div class="sub">–§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞ (–≤ —Ä–∞–º–∫–∞—Ö –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞).</div>
        </div>

        <div class="tender-control-actions">
          <button class="btn primary" id="tender-search-btn">–ù–∞–π—Ç–∏</button>
          <button class="btn" id="tender-search-reset">–°–±—Ä–æ—Å</button>
        </div>
      </div>

      <div class="tender-legend">
        <div class="tender-legend-title">–ö–∞–Ω–¥–∏–¥–∞—Ç—ã (score ‚â• 0.3)</div>

        <div class="tableWrap">
          <table class="tender-offers-table" id="tender-offers-table">
            <thead>
              <tr>
                <th>–ü–æ—Å—Ç–∞–≤—â–∏–∫</th>
                <th>–¢–æ–≤–∞—Ä</th>
                <th style="width:120px;">–¶–µ–Ω–∞/–µ–¥</th>
                <th style="width:90px;">Score</th>
                <th style="width:220px;">–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody id="tender-offers-body">
              <tr><td colspan="5" class="sub">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ù–∞–π—Ç–∏¬ª.</td></tr>
            </tbody>
          </table>
        </div>

        <div class="sub" style="margin-top:10px;">
          ¬´–í—ã–±—Ä–∞—Ç—å¬ª ‚Äî –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –≤ —è—á–µ–π–∫—É —Å—Ä–∞–≤–Ω–µ–Ω–∏—è. ¬´‚òÖ –í –∫–æ—Ä–∑–∏–Ω—É¬ª ‚Äî –≤—ã–±—Ä–∞—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–∫—É–ø–∫–∏.
        </div>
      </div>
    </div>
  </div>

  <!-- SUPPLIERS MODAL -->
  <div class="tender-modal hidden" id="tender-suppliers-modal" aria-hidden="true">
    <div class="tender-modal-body" role="dialog" aria-modal="true">
      <div class="tender-modal-header">
        <div>
          <div class="h3">–í—ã–±–æ—Ä –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</div>
          <div class="sub">–û—Ç–º–µ—Ç—å—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ ‚Äî –æ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è —Å—Ç–æ–ª–±—Ü–∞–º–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ.</div>
        </div>
        <button class="btn" id="tender-suppliers-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <div class="tender-control" style="margin-top:12px;">
        <div class="tender-control-title">–ü–æ–∏—Å–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</div>
        <input class="input" id="tender-suppliers-search" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ‚Ä¶">
      </div>

      <div id="tender-suppliers-list" class="suppliersList">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>

      <div class="suppliersActions">
        <button class="btn primary" id="tender-suppliers-apply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>
</div>

<!-- ORDERS MODAL -->
<div class="tender-modal hidden" id="tender-orders-modal" aria-hidden="true">
  <div class="tender-modal-body" role="dialog" aria-modal="true">
    <div class="tender-modal-header">
      <div>
        <div class="h3">–°–æ–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã</div>
        <div class="sub" id="tender-orders-subtitle">–û–¥–∏–Ω –∑–∞–∫–∞–∑ –Ω–∞ –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã.</div>
      </div>
      <button class="btn" id="tender-orders-close">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <div id="tender-orders-body" class="sub">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
  </div>
</div>

<style>
  #tenders-demo .tender-flex { display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
  #tenders-demo .tender-form { margin-left:auto; }
  #tenders-demo .tender-table-wrap { width:100%; }

  #tenders-demo .tender-hint {
    margin: 14px 0;
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 12px;
    background: #fbfcff;
    color: #2b3a55;
    font-size: 13px;
  }
  #tenders-demo .tag {
    display:inline-flex; align-items:center;
    padding: 3px 8px;
    border-radius: 999px;
    background: #eef2ff;
    color: #312e81;
    font-weight: 700;
    font-size: 12px;
    margin-right: 8px;
  }

  #tenders-demo .tender-topbar {
    display:flex; align-items:center; gap:12px; flex-wrap:wrap;
    padding: 8px 0 0 0;
  }
  #tenders-demo .tender-title { flex: 1 1 auto; min-width: 240px; }
  #tenders-demo .h2 { font-size: 20px; font-weight: 800; }
  #tenders-demo .h3 { font-size: 16px; font-weight: 800; }
  #tenders-demo .tender-actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

  #tenders-demo .hidden { display:none !important; }

  #tenders-demo .tender-grid {
    width:100%;
    border: 1px solid var(--border);
    border-radius: 14px;
    overflow: hidden;
  }
  #tenders-demo .tender-grid table { width:100%; border-collapse: collapse; }
  #tenders-demo .tender-grid th, #tenders-demo .tender-grid td {
    padding: 12px 12px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
    text-align: left;
    font-size: 13px;
  }
  #tenders-demo .tender-grid thead th {
    background: #f8fafc;
    font-size: 12px;
    text-transform: uppercase;
    color: #475569;
    letter-spacing: .02em;
  }
  #tenders-demo .tender-actions-col {
    display:flex; flex-direction:column; gap:8px; align-items:flex-end;
  }

  #tenders-demo .tender-modal {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.35);
    display:flex; align-items:center; justify-content:center;
    z-index: 200;
    padding: 20px;
  }
  #tenders-demo .tender-modal-body {
    background: #fff;
    width: min(1100px, 96vw);
    max-height: 86vh;
    overflow: auto;
    border-radius: 16px;
    padding: 16px;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
  }
  #tenders-demo .tender-modal-header {
    display:flex; align-items:center; justify-content:space-between;
    gap: 12px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 12px;
  }
  #tenders-demo .tender-modal-controls {
    display:grid;
    grid-template-columns: 1fr auto;
    gap: 12px;
    align-items:end;
    margin-bottom: 14px;
  }
  #tenders-demo .tender-control {
    border: 1px solid #e6ebff;
    border-radius: 14px;
    padding: 12px;
    background: #fbfcff;
  }
  #tenders-demo .tender-control-title {
    font-weight: 800;
    font-size: 12px;
    text-transform: uppercase;
    color: #334155;
    margin-bottom: 8px;
    letter-spacing: .02em;
  }
  #tenders-demo .tender-control-actions { display:flex; gap:10px; align-items:center; justify-content:flex-end; }

  #tenders-demo .tender-legend { margin-top: 10px; }
  #tenders-demo .tender-legend-title { font-weight: 800; margin-bottom: 8px; }

  #tenders-demo .tender-offers-table { width:100%; border-collapse: collapse; }
  #tenders-demo .tender-offers-table th, #tenders-demo .tender-offers-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    text-align:left;
    font-size: 13px;
    vertical-align: top;
  }
  #tenders-demo .tender-offers-table th { background:#f8fafc; color:#475569; font-size:12px; text-transform: uppercase; }

  @media (max-width: 900px) {
    #tenders-demo .tender-modal-controls { grid-template-columns: 1fr; }
    #tenders-demo .tender-actions-col { align-items:stretch; }
  }
</style>

<script src="/static/tenders.js" defer></script>
{% endblock %}
